<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 11: Health Problems of the Infant</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #f8fdff;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(66, 133, 244, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #4285f4;
        }
        
        .header {
            background: linear-gradient(135deg, #1565c0, #4285f4);
            color: white;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path d="M50,20 Q70,30 80,50 Q70,70 50,80 Q30,70 20,50 Q30,30 50,20 Z" fill="white"/><circle cx="50" cy="50" r="15" fill="white"/><path d="M40,35 L60,35 L60,65 L40,65 Z" fill="white"/><polygon points="50,20 60,40 50,50 40,40" fill="white"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #bbdefb;
            line-height: 1.2;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            color: #e3f2fd;
            margin-bottom: 8px;
        }
        
        .progress {
            background: #1565c0;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #64b5f6, #4285f4);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #0d47a1, #1565c0);
            border-bottom: 1px solid #64b5f6;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #64b5f6;
            background: rgba(255, 255, 255, 0.95);
            color: #1565c0;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(100, 181, 246, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #64b5f6, #4285f4);
            color: white;
            border-color: #1565c0;
            box-shadow: 0 6px 12px rgba(100, 181, 246, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8fdff;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #64b5f6;
            box-shadow: 0 4px 8px rgba(66, 133, 244, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #1565c0, #64b5f6);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(21, 101, 192, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #0d47a1;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #d32f2f;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(211, 47, 47, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #bbdefb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #e3f2fd;
            border-color: #64b5f6;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(100, 181, 246, 0.2);
        }
        
        .option-letter {
            background: #bbdefb;
            color: #1565c0;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #90caf9;
        }
        
        /* CORRECT - ALWAYS GREEN */
        .option.correct {
            background: #c8e6c9;
            border-color: #388e3c;
            color: #1b5e20;
        }
        
        .option.correct .option-letter {
            background: #388e3c;
            color: white;
            border-color: #388e3c;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #ffcdd2;
            border-color: #d32f2f;
            color: #b71c1c;
        }
        
        .option.incorrect .option-letter {
            background: #d32f2f;
            color: white;
            border-color: #d32f2f;
        }
        
        .option.selected {
            background: #e3f2fd;
            border-color: #64b5f6;
            color: #1565c0;
        }
        
        .option.selected .option-letter {
            background: #64b5f6;
            color: #0d47a1;
            border-color: #4285f4;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #c8e6c9;
            border: 3px solid #388e3c;
            color: #1b5e20;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #ffcdd2;
            border: 3px solid #d32f2f;
            color: #b71c1c;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #bbdefb;
            border-top: 2px solid #90caf9;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #1565c0;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #64b5f6;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1565c0, #64b5f6);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(21, 101, 192, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4285f4, #1565c0);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(66, 133, 244, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffb300, #ff8f00);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 179, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 3px solid #ffb300;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 179, 0, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #ff8f00;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #c62828, #b71c1c);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(198, 40, 40, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(198, 40, 40, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #c62828;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #fff3cd;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #f8fdff, #e3f2fd);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #bbdefb;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #0d47a1;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #bbdefb;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #64b5f6;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #4285f4;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #e3f2fd;
            border-style: solid;
            border-color: #4285f4;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #c8e6c9, #a5d6a7);
            border-color: #388e3c;
            border-style: solid;
            color: #1b5e20;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #ffcdd2, #ef9a9a);
            border-color: #d32f2f;
            border-style: solid;
            color: #b71c1c;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Chapter 11: Health Problems of the Infant</h1>
            <div class="subtitle">Pediatric Health Theme - Blue Medical & Care Environment</div>
            <div class="stats">
                <div class="stat">üìö 33 Questions</div>
                <div class="stat">üéØ Immediate Feedback</div>
                <div class="stat">‚úÖ Green/Red System</div>
                <div class="stat">üîÑ Multiple Question Types</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (33)</button>
            <button class="section-btn" onclick="setSection('multiple-response')">Multiple Response (9)</button>
            <button class="section-btn" onclick="setSection('med-calc')">Med Calculation (3)</button>
            <button class="section-btn" onclick="setSection('matching')">Matching (5)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (50)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/33</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 11 Data - Health Problems of the Infant
        const sections = {
            'multiple-choice': [
                {
                    question: "Rickets is caused by a deficiency in what?",
                    options: ["Vitamin A", "Vitamin C", "Folic acid and iron", "Vitamin D and calcium"],
                    correct: 3,
                    rationale: "Fat-soluble vitamin D and calcium are necessary in adequate amounts to prevent rickets. No correlation exists between rickets and folic acid, iron, or vitamins A and C."
                },
                {
                    question: "Which factors will decrease iron absorption and should not be given at the same time as an iron supplement?",
                    options: ["Milk", "Fruit juice", "Multivitamin", "Meat, fish, poultry"],
                    correct: 0,
                    rationale: "Many foods interfere with iron absorption and should be avoided when iron is consumed. These foods include phosphates found in milk, phytates found in cereals, and oxalates found in many vegetables. Vitamin C-containing juices enhance the absorption of iron."
                },
                {
                    question: "The nurse is helping parents achieve a more nutritionally adequate vegetarian diet for their children. Which is most likely lacking in their particular diet?",
                    options: ["Fat", "Protein", "Vitamins C and A", "Iron and calcium"],
                    correct: 3,
                    rationale: "Deficiencies can occur when various substances in the diet interact with minerals. For example, iron, zinc, and calcium can form insoluble complexes with phytates or oxalates (substances found in plant proteins), which impair the bioavailability of the mineral. This type of interaction is important in vegetarian diets because plant foods such as soy are high in phytates."
                },
                {
                    question: "A 1-year-old child is on a pure vegetarian (vegan) diet. This diet requires supplementation with what?",
                    options: ["Niacin", "Folic acid", "Vitamins D and B12", "Vitamins C and E"],
                    correct: 2,
                    rationale: "Pure vegetarian (vegan) diets eliminate any food of animal origin, including milk and eggs. These diets require supplementation with many vitamins, especially vitamin B6, vitamin B12, riboflavin, vitamin D, iron, and zinc."
                },
                {
                    question: "What is marasmus?",
                    options: [
                        "Deficiency of protein with an adequate supply of calories",
                        "Syndrome that results solely from vitamin deficiencies",
                        "Not confined to geographic areas where food supplies are inadequate",
                        "Characterized by thin, wasted extremities and a prominent abdomen resulting from edema (ascites)"
                    ],
                    correct: 2,
                    rationale: "Marasmus is a syndrome of emotional and physical deprivation. It is not confined to geographic areas where food supplies are inadequate. Marasmus is characterized by gradual wasting and atrophy of body tissues, especially of subcutaneous fat."
                },
                {
                    question: "At a well-child check-up, the nurse notes that an infant with a previous diagnosis of failure to thrive (FTT) is now steadily gaining weight. The nurse should recommend that fruit juice intake be limited to no more than how much?",
                    options: ["4 oz/day", "6 oz/day", "8 oz/day", "12 oz/day"],
                    correct: 0,
                    rationale: "Restrict juice intake in children with FTT until adequate weight gain has been achieved with appropriate milk sources; thereafter, give no more than 4 oz/day of juice."
                },
                {
                    question: "An infant has been diagnosed with an allergy to milk. In teaching the parent how to meet the infant's nutritional needs, the nurse states that",
                    options: [
                        "Most children will grow out of the allergy.",
                        "All dairy products must be eliminated from the child's diet.",
                        "It is important to have the entire family follow the special diet.",
                        "Antihistamines can be used so the child can have milk products."
                    ],
                    correct: 0,
                    rationale: "Approximately 80% of children with cow's milk allergy develop tolerance by the fifth birthday. The child can have eggs. Any food that has milk as a component or filler is eliminated."
                },
                {
                    question: "Lactose intolerance is diagnosed in an 11-month-old infant. Which should the nurse recommend as a milk substitute?",
                    options: ["Yogurt", "Ice cream", "Fortified cereal", "Cow's milk-based formula"],
                    correct: 0,
                    rationale: "Yogurt contains the inactive lactase enzyme, which is activated by the temperature and pH of the duodenum. This lactase activity substitutes for the lack of endogenous lactase."
                },
                {
                    question: "Which term refers to the relative lactase deficiency observed in preterm infants of less than 34 weeks of gestation?",
                    options: [
                        "Congenital lactase deficiency",
                        "Primary lactase deficiency",
                        "Secondary lactase deficiency",
                        "Developmental lactase deficiency"
                    ],
                    correct: 3,
                    rationale: "Developmental lactase deficiency refers to the relative lactase deficiency observed in preterm infants of less than 34 weeks of gestation."
                },
                {
                    question: "Which statement best describes colic?",
                    options: [
                        "Periods of abdominal pain resulting in weight loss",
                        "Usually the result of poor or inadequate mothering",
                        "Periods of abdominal pain and crying occurring in infants older than age 6 months",
                        "A paroxysmal abdominal pain or cramping manifested by episodes of loud crying"
                    ],
                    correct: 3,
                    rationale: "Colic is described as paroxysmal abdominal pain or cramping that is manifested by loud crying and drawing up the legs to the abdomen."
                },
                {
                    question: "The parent of an infant with colic tells the nurse, 'All this baby does is scream at me; it is a constant worry.' What is the nurse's best action?",
                    options: [
                        "Encourage the parent to verbalize feelings.",
                        "Encourage the parent not to worry so much.",
                        "Assess the parent for other signs of inadequate parenting.",
                        "Reassure the parent that colic rarely lasts past age 9 months."
                    ],
                    correct: 0,
                    rationale: "Colic is multifactorial, and no single treatment is effective for all infants. The parent is verbalizing concern and worry. The nurse should allow the parent to put these feelings into words."
                },
                {
                    question: "What may clinical manifestations of failure to thrive (FTT) in a 13-month-old include?",
                    options: [
                        "Irregularity in activities of daily living",
                        "Preferring solid food to milk or formula",
                        "Weight that is at or below the 10th percentile",
                        "Appropriate achievement of developmental landmarks"
                    ],
                    correct: 0,
                    rationale: "One of the clinical manifestations of children with FTT is irregularity or low rhythmicity in activities of daily living."
                },
                {
                    question: "Which one of the following strategies might be recommended for an infant with failure to thrive (FTT) to increase caloric intake?",
                    options: [
                        "Vary the schedule for routine activities on a daily basis.",
                        "Be persistent through 10 to 15 minutes of food refusal.",
                        "Avoid solids until after the bottle is well accepted.",
                        "Use developmental stimulation by a specialist during feedings."
                    ],
                    correct: 1,
                    rationale: "Calm perseverance through 10 to 15 minutes of food refusal will eventually diminish negative behavior."
                },
                {
                    question: "The nurse is examining an infant, age 10 months, who was brought to the clinic for persistent diaper rash. The nurse finds perianal inflammation with satellite lesions. What is the most likely cause?",
                    options: ["Impetigo", "Urine and feces", "Candida albicans infection", "Infrequent diapering"],
                    correct: 2,
                    rationale: "C. albicans infection produces perianal inflammation and a maculopapular rash with satellite lesions that may cross the inguinal folds."
                },
                {
                    question: "A new parent asks the nurse, 'How can diaper rash be prevented?' What should the nurse recommend?",
                    options: [
                        "Wash the infant with soap before applying a thin layer of oil.",
                        "Clean the infant with soap and water every time diaper is changed.",
                        "Wipe stool from the skin using water and a mild cleanser.",
                        "When changing the diaper, wipe the buttocks with oil and powder the creases."
                    ],
                    correct: 2,
                    rationale: "Change the diaper as soon as it becomes soiled. Gently wipe stool from the skin with water and mild soap. The skin should be thoroughly dried after washing."
                },
                {
                    question: "What is most descriptive of atopic dermatitis (AD) (eczema) in an infant?",
                    options: [
                        "Easily cured",
                        "Worse in humid climates",
                        "Associated with hereditary allergies",
                        "Related to upper respiratory tract infections"
                    ],
                    correct: 2,
                    rationale: "AD is a type of pruritic eczema that usually begins during infancy and is associated with allergy with a hereditary tendency."
                },
                {
                    question: "Where do eczematous lesions most commonly occur in an infant?",
                    options: [
                        "Abdomen, cheeks, and scalp",
                        "Buttocks, abdomen, and scalp",
                        "Back and flexor surfaces of the arms and legs",
                        "Cheeks and extensor surfaces of the arms and legs"
                    ],
                    correct: 3,
                    rationale: "The lesions of atopic dermatitis are generalized in infants. They are most common on the cheeks, scalp, trunk, and extensor surfaces of the extremities."
                },
                {
                    question: "The nurse is discussing the management of atopic dermatitis (eczema) with a parent. What should be included?",
                    options: [
                        "Dress infant warmly to prevent chilling.",
                        "Keep the infant's fingernails and toenails cut short and clean.",
                        "Give bubble baths instead of washing lesions with soap.",
                        "Launder clothes in mild detergent; use fabric softener in the rinse."
                    ],
                    correct: 1,
                    rationale: "The infant's nails should be kept short and clean and have no sharp edges. Gloves or cotton socks can be placed over the child's hands and pinned to the shirt sleeves."
                },
                {
                    question: "The parents of a 3-month-old infant report that their infant sleeps supine (face up) but is often prone (face down) while awake. The nurse's response should be based on remembering what?",
                    options: [
                        "This is acceptable to encourage head control and turning over.",
                        "This is acceptable to encourage fine motor development.",
                        "This is unacceptable because of the risk of sudden infant death syndrome (SIDS).",
                        "This is unacceptable because it does not encourage achievement of developmental milestones."
                    ],
                    correct: 0,
                    rationale: "These parents are implementing the guidelines to reduce the risk of SIDS. Infants should sleep on their backs to reduce the risk of SIDS and then be placed on their abdomens when awake to enhance achievement of milestones such as head control."
                },
                {
                    question: "After the introduction of the Back to Sleep campaign in 1992, an increased incidence has been noted of which pediatric issues?",
                    options: [
                        "Sudden infant death syndrome (SIDS)",
                        "Plagiocephaly",
                        "Failure to thrive",
                        "Apnea of infancy"
                    ],
                    correct: 1,
                    rationale: "Plagiocephaly is a misshapen head caused by the prolonged pressure on one side of the skull. If that side becomes misshapen, facial asymmetry may result."
                },
                {
                    question: "The nurse is interviewing the parents of a 4-month-old boy brought to the hospital emergency department. The infant is dead, and no attempt at resuscitation is made. The parents state that the baby was found in his crib with a blanket over his head, lying face down in bloody fluid from his nose and mouth. The nurse might initially suspect his death was caused by what?",
                    options: ["Suffocation", "Child abuse", "Infantile apnea", "Sudden infant death syndrome (SIDS)"],
                    correct: 3,
                    rationale: "The description of how the child was found in the crib is suggestive of SIDS. The nurse is careful to tell the parents that a diagnosis cannot be confirmed until an autopsy is performed."
                },
                {
                    question: "What is an important nursing responsibility when dealing with a family experiencing the loss of an infant from sudden infant death syndrome (SIDS)?",
                    options: [
                        "Discourage the parents from making a last visit with the infant.",
                        "Make a follow-up home visit to the parents as soon as possible after the child's death.",
                        "Explain how SIDS could have been predicted and prevented.",
                        "Interview the parents in depth concerning the circumstances surrounding the child's death."
                    ],
                    correct: 1,
                    rationale: "A competent, qualified professional should visit the family at home as soon as possible after the death. Printed information about SIDS should be provided to the family."
                },
                {
                    question: "What is an appropriate action when an infant becomes apneic?",
                    options: [
                        "Shake vigorously.",
                        "Roll the infant's head to the side.",
                        "Gently stimulate the trunk by patting or rubbing.",
                        "Hold the infant by the feet upside down with the head supported."
                    ],
                    correct: 2,
                    rationale: "If an infant is apneic, the infant's trunk should be gently stimulated by patting or rubbing. If the infant is prone, turn onto the back."
                },
                {
                    question: "A parent brings a 12-month-old infant into the emergency department and tells the nurse that the infant is allergic to peanuts and was accidentally given a cookie with peanuts in it. The infant is dyspneic, wheezing, and cyanotic. The health care provider has prescribed a dose of epinephrine to be administered. The infant weighs 24 lb. How many milligrams of epinephrine should be administered?",
                    options: ["0.11 to 0.33 mg", "0.011 to 0.3 mg", "1.1 to 3.3 mg", "11 to 33 mg"],
                    correct: 1,
                    rationale: "The correct dose of epinephrine to use in the emergency management of an anaphylactic reaction is 0.001 mg/kg up to a maximum of 0.3 mg, giving a range of 0.011 to 0.3 mg using a weight of 11 kg (24 lb)."
                },
                {
                    question: "The nurse is teaching a parent with a 2-month-old infant who has been diagnosed with colic about ways to relieve colic. Which statement by the parent indicates the need for additional teaching?",
                    options: [
                        "I should let my infant cry for at least 30 minutes before I respond.",
                        "I will swaddle my infant tightly with a soft blanket.",
                        "I should massage my infant's abdomen whenever possible.",
                        "I will place my infant in an upright seat after feeding."
                    ],
                    correct: 0,
                    rationale: "Because the infant has been diagnosed with colic, the parent should respond to the infant immediately or any type of interventions to relieve colic may not be effective."
                },
                {
                    question: "A new parent relates to the nurse that the family has many known food allergies. Which is considered a primary strategy for feeding the infant with many family food allergies?",
                    options: [
                        "Using soy formula for feeding",
                        "Maternal avoidance of cow's milk protein",
                        "Exclusive breastfeeding for 4 to 6 months",
                        "Delaying the introduction of highly allergenic foods past 6 months"
                    ],
                    correct: 2,
                    rationale: "Exclusive breastfeeding for 4 to 6 months is now considered a primary strategy for avoiding atopy in families with known food allergies."
                },
                {
                    question: "A bottle-fed infant has been diagnosed with cow's milk allergy. Which formula should the nurse expect to be prescribed for the infant?",
                    options: ["Similac", "Pregestimil", "Enfamil with iron", "Gerber Good Start"],
                    correct: 1,
                    rationale: "For infants with cow's milk allergy, the formula will be changed to a casein hydrolysate milk formula (Pregestimil, Nutramigen, or Alimentum) in which the protein has been broken down into its amino acids through enzymatic hydrolysis."
                },
                {
                    question: "The nurse is collecting a stool sample from an infant with lactose intolerance. Which fecal pH should the nurse expect as the result?",
                    options: ["5.5", "7.0", "7.5", "8"],
                    correct: 0,
                    rationale: "An acidic pH (5-5.5) indicates malabsorption, which occurs with lactose intolerance. The normal pH of the stool is 7.0 to 7.5."
                },
                {
                    question: "An infant has been diagnosed with failure to thrive (FTT) classified according to the pathophysiology of inadequate caloric intake. The nurse understands that the reason for the FTT is most likely related to what?",
                    options: [
                        "Cow's milk allergy",
                        "Congenital heart disease",
                        "Metabolic storage disease",
                        "Incorrect formula preparation"
                    ],
                    correct: 3,
                    rationale: "FTT classified according to the pathophysiology of inadequate caloric intake is related to incorrect formula preparation, neglect, food fads, excessive juice poverty, breastfeeding problems, behavioral problems affecting eating, parental restriction of caloric intake, or central nervous system problems affecting intake consumption."
                },
                {
                    question: "An infant has been diagnosed with failure to thrive (FTT) classified according to the pathophysiology of defective utilization. The nurse understands that the reason for the FTT is most likely related to what?",
                    options: ["Cystic fibrosis", "Hyperthyroidism", "Congenital infection", "Breastfeeding problems"],
                    correct: 2,
                    rationale: "FTT classified according to the pathophysiology of defective utilization is related to a genetic anomaly, congenital infection or metabolic storage disease."
                },
                {
                    question: "The nurse is teaching parents guidelines for feeding their 8-month-old infant with failure to thrive (FTT). Which statement by the parents indicates a need for further teaching?",
                    options: [
                        "We will continue to use the 24-kcal/oz formula.",
                        "We will be sure to follow the formula preparation instructions.",
                        "We will be sure to give our infant at least 8 oz of juice every day.",
                        "We will be sure to feed our infant according to the written schedule."
                    ],
                    correct: 2,
                    rationale: "Juice intake in infants with FTT should be withheld until adequate weight gain has been achieved with appropriate milk sources; thereafter, no more than 4 oz/day of juice should be given."
                },
                {
                    question: "The nurse is teaching parents about caring for their infant with seborrheic dermatitis (cradle cap). Which statement by the parents indicates understanding of the teaching?",
                    options: [
                        "We will rinse off the shampoo quickly and dry the scalp thoroughly.",
                        "We will shampoo the hair every other day with antiseborrheic shampoo.",
                        "We will be sure to shampoo the hair without removing any of the crusts.",
                        "We will use a fine-tooth comb to help remove the loosened crusts from the strands of hair."
                    ],
                    correct: 3,
                    rationale: "A fine-tooth comb or a soft facial brush helps remove the loosened crusts from the strands of hair after shampooing. This is an accurate statement."
                },
                {
                    question: "The nurse is administering an oral antihistamine at bedtime to a child with atopic dermatitis (eczema). Which antihistamine should the nurse expect to be prescribed at bedtime?",
                    options: [
                        "Cetirizine (Zyrtec)",
                        "Loratadine (Claritin)",
                        "Fexofenadine (Allegra)",
                        "Diphenhydramine (Benadryl)"
                    ],
                    correct: 3,
                    rationale: "Oral antihistamine drugs such as hydroxyzine or diphenhydramine usually relieve moderate or severe pruritus. Nonsedating antihistamines may be preferred for daytime pruritus relief. Because pruritus increases at night, a mildly sedating antihistamine such as Benadryl is prescribed."
                }
            ],
            
            'multiple-response': [
                {
                    question: "The nurse is planning care for an infant with eczema. Which interventions should the nurse include in the care plan? (Select all that apply.)",
                    options: [
                        "Avoid giving the infant a bubble bath.",
                        "Avoid the use of a humidifier in the infant's room.",
                        "Avoid overdressing the infant.",
                        "Avoid the use of topical steroids on the infant's skin.",
                        "Avoid wet compresses on the infant's most affected areas."
                    ],
                    correct: [0, 2],
                    rationale: "Guidelines for care of an infant with eczema include avoiding a bubble bath and harsh soaps and avoiding overdressing the infant to prevent perspiration, which can cause a flare-up."
                },
                {
                    question: "The community health nurse is reviewing risk factors for vitamin D deficiency. Which children are at high risk for vitamin D deficiency? (Select all that apply.)",
                    options: [
                        "Children with fair pigmentation",
                        "Children who are overweight or obese",
                        "Children who are exclusively bottle fed",
                        "Children with diets low in sources of vitamin D",
                        "Children of families who use milk products not supplemented with vitamin D"
                    ],
                    correct: [1, 3, 4],
                    rationale: "Populations at risk for vitamin D deficiency include overweight or obese children, children with diets low in sources of vitamin D, and children of families who use milk products not supplemented with vitamin D."
                },
                {
                    question: "The nurse has administered a dose of epinephrine to a 12-month-old infant. For which adverse reactions of epinephrine should the nurse monitor? (Select all that apply.)",
                    options: ["Nausea", "Tremors", "Irritability", "Bradycardia", "Hypotension"],
                    correct: [0, 1, 2],
                    rationale: "Epinephrine increases activation of the sympathetic nervous system. Adverse effects include nausea, tremors, and irritability. Tachycardia would occur, not bradycardia, and hypertension, not hypotension, would occur."
                },
                {
                    question: "A 12-month-old infant has been diagnosed with failure to thrive (FTT). Which assessment findings does the nurse expect to be documented with this infant? (Select all that apply.)",
                    options: [
                        "Fear of strangers",
                        "Minimal smiling",
                        "Avoidance of eye contact",
                        "Meeting developmental milestones",
                        "Wide-eyed gaze and continual scan of the environment"
                    ],
                    correct: [1, 2, 4],
                    rationale: "Signs and symptoms of FTT include minimal smiling, avoidance of eye contact, and a wide-eyed gaze and continual scan of the environment (radar gaze)."
                },
                {
                    question: "The nurse is preparing to feed a 10-month-old child diagnosed with failure to thrive (FTT). Which actions should the nurse plan to implement? (Select all that apply.)",
                    options: [
                        "Be persistent.",
                        "Introduce new foods slowly.",
                        "Provide a stimulating atmosphere.",
                        "Maintain a calm, even temperament.",
                        "Feed the infant only when signs of hunger are exhibited."
                    ],
                    correct: [0, 1, 3],
                    rationale: "Feeding strategies for children with FTT should include persistence; introducing new foods slowly; and maintaining a calm, even temperament."
                },
                {
                    question: "The nurse is teaching parents about foods that are hyperallergenic. Which foods should the nurse include? (Select all that apply.)",
                    options: ["Peanuts", "Bananas", "Potatoes", "Egg noodles", "Tomato juice"],
                    correct: [0, 3, 4],
                    rationale: "Hyperallergenic foods include peanuts, egg noodles, and tomato juice. Bananas and potatoes are not hyperallergenic."
                },
                {
                    question: "The nurse is teaching parents about potential causes of colic in infancy. Which should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Overeating",
                        "Understimulation",
                        "Frequent burping",
                        "Parental smoking",
                        "Swallowing excessive air"
                    ],
                    correct: [0, 3, 4],
                    rationale: "Potential causes of colic include too rapid feeding, overeating, swallowing excessive air, improper feeding technique (especially in positioning and burping), emotional stress or tension between the parent and child, parental smoking, and overstimulation."
                },
                {
                    question: "What are risk factors for sudden infant death syndrome? (Select all that apply.)",
                    options: [
                        "Postterm",
                        "Female gender",
                        "Low Apgar scores",
                        "Recent viral illness",
                        "Native American infants"
                    ],
                    correct: [2, 3, 4],
                    rationale: "Infant risk factors for sudden infant death syndrome include those with low Apgar scores and recent viral illness and Native American infants."
                },
                {
                    question: "The nurse is teaching parents strategies to manage their child's refusal to go to sleep. Which should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Keep bedtime early.",
                        "Enforce consistent limits.",
                        "Use a reward system with the child.",
                        "Have a consistent before bedtime routine."
                    ],
                    correct: [1, 2, 3],
                    rationale: "Strategies to manage a child's refusal to go to sleep include enforcement of consistent limits, using a reward system, and having a consistent before bedtime routine."
                }
            ],
            
            'med-calc': [
                {
                    question: "A healthcare provider prescribes vitamin D supplements, 300 IU orally, daily. The medication label states: Vitamin D 1000 IU/10 ml. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["1 ml", "2 ml", "3 ml", "4 ml"],
                    correct: 2,
                    rationale: "300 IU / 1000 IU √ó 10 ml = 3 ml"
                },
                {
                    question: "A healthcare provider prescribes iron supplements (Fer-In-Sol), 1 mg/kg/day orally (PO). The infant weighs 5 kg. The medication label states: Fer-In-Sol 25 mg/1 ml. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["0.1 ml", "0.2 ml", "0.3 ml", "0.5 ml"],
                    correct: 1,
                    rationale: "Dose = 1 mg/kg √ó 5 kg = 5 mg; 5 mg / 25 mg √ó 1 ml = 0.2 ml"
                },
                {
                    question: "A healthcare provider prescribes adrenaline (epinephrine), intramuscularly (IM) 0.15 mg, times one, stat. The medication label states: Epinephrine 1:1000, 1 mg/1 ml. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["0.10 ml", "0.15 ml", "0.20 ml", "0.25 ml"],
                    correct: 1,
                    rationale: "0.15 mg / 1 mg √ó 1 ml = 0.15 ml"
                }
            ],
            
            'matching': [
                {
                    question: "A food elicits a reproducible adverse reaction but does not have an established immunologic mechanism.",
                    options: ["Food allergy", "Food allergen", "Food intolerance", "Sensitization", "Atopy"],
                    correct: 2,
                    rationale: "Food intolerance involves a reproducible adverse reaction without an established immunologic mechanism."
                },
                {
                    question: "An adverse health effect arising from a specific immune response that occurs reproducibly on exposure to a given food.",
                    options: ["Food allergy", "Food allergen", "Food intolerance", "Sensitization", "Atopy"],
                    correct: 0,
                    rationale: "Food allergy involves an adverse health effect arising from a specific immune response that occurs reproducibly on exposure to a given food."
                },
                {
                    question: "Specific components of food or ingredients in food that are recognized by allergen-specific immune cells eliciting an immune reaction.",
                    options: ["Food allergy", "Food allergen", "Food intolerance", "Sensitization", "Atopy"],
                    correct: 1,
                    rationale: "Food allergen refers to specific components of food or ingredients in food that are recognized by allergen-specific immune cells eliciting an immune reaction."
                },
                {
                    question: "Allergy with a hereditary tendency.",
                    options: ["Food allergy", "Food allergen", "Food intolerance", "Sensitization", "Atopy"],
                    correct: 4,
                    rationale: "Atopy refers to allergy with a hereditary tendency."
                },
                {
                    question: "Initial exposure to an allergen resulting in an immune response; subsequent exposure induces a much stronger response.",
                    options: ["Food allergy", "Food allergen", "Food intolerance", "Sensitization", "Atopy"],
                    correct: 3,
                    rationale: "Sensitization refers to initial exposure to an allergen resulting in an immune response; subsequent exposure induces a much stronger response."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['multiple-response'].map(q => ({...q, section: 'multiple-response'})),
            ...sections['med-calc'].map(q => ({...q, section: 'med-calc'})),
            ...sections['matching'].map(q => ({...q, section: 'matching', isMatching: true}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
            'med-calc': Array(sections['med-calc'].length).fill(null),
            'matching': Array(sections['matching'].length).fill(null),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMultipleResponseQuestion() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'multiple-response' || Array.isArray(questionData?.correct);
            }
            return currentSection === 'multiple-response';
        }

        function isMatchingSection() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.isMatching || questionData?.section === 'matching';
            }
            return currentSection === 'matching';
        }

        function isMedCalcSection() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'med-calc';
            }
            return currentSection === 'med-calc';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isMatching = isMatchingSection();
            const isMultipleResponse = isMultipleResponseQuestion();
            const isMedCalc = isMedCalcSection();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = isMatching ? 'flex' : 'none';
            document.getElementById('options').style.display = isMatching ? 'none' : 'flex';
            document.getElementById('multipleSelectIndicator').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('multipleSelectInstructions').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = isMultipleResponse ? 'flex' : 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            if (isMatching) {
                document.getElementById('matchingQuestion').textContent = questionData.question;
                loadMatchingOptions(questionData);
            } else {
                document.getElementById('question').textContent = questionData.question;
                loadOptions(questionData);
            }
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMultipleResponse) {
                    selectedOptions = storedAnswer.selected || [];
                    isSubmitted = storedAnswer.submitted || false;
                    
                    if (isSubmitted) {
                        showFeedbackForMultipleResponse(questionData);
                        document.getElementById('nextBtn').disabled = false;
                        document.getElementById('submitBtn').disabled = true;
                    } else {
                        highlightSelectedOptionsForMultipleResponse();
                        document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
                        document.getElementById('nextBtn').disabled = false;
                        if (selectedOptions.length > 0) {
                            document.getElementById('cancelBtn').classList.add('show');
                        }
                    }
                } else if (isMatching) {
                    selectedOption = storedAnswer;
                    highlightMatchingOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                } else {
                    // For med-calc and multiple-choice
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                if (isMultipleResponse) {
                    document.getElementById('submitBtn').disabled = true;
                }
            }
        }

        function loadMatchingOptions(questionData) {
            const matchingOptions = document.getElementById('matchingOptions');
            matchingOptions.innerHTML = '';
            
            if (questionData.options) {
                questionData.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'matching-option';
                    optionDiv.textContent = `${String.fromCharCode(65 + index)}) ${option}`;
                    optionDiv.onclick = () => selectMatchingOption(index, questionData);
                    matchingOptions.appendChild(optionDiv);
                });
                
                const storedAnswer = answers[currentSection][currentQuestion];
                if (storedAnswer !== null && storedAnswer !== undefined) {
                    highlightMatchingOption(storedAnswer, questionData);
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                // Fallback if no options are provided
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                handleMultipleResponseSelect(index, questionData);
            } else {
                handleSingleSelect(index, questionData);
            }
        }

        function handleSingleSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function handleMultipleResponseSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            if (isSubmitted) return;
            
            const optionIndex = selectedOptions.indexOf(index);
            if (optionIndex === -1) {
                selectedOptions.push(index);
            } else {
                selectedOptions.splice(optionIndex, 1);
            }
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
            
            // Save the selection
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].selected = selectedOptions;
            answers[currentSection][currentQuestion].submitted = false;
            
            document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.toggle('show', selectedOptions.length > 0);
        }

        function selectMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            // Clear all classes first
            document.querySelectorAll('.matching-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            const selectedOptionElement = document.querySelectorAll('.matching-option')[index];
            selectedOptionElement.classList.add('selected');
            
            if (index === questionData.correct) {
                selectedOptionElement.classList.add('correct');
            } else {
                selectedOptionElement.classList.add('incorrect');
                // Also show the correct answer
                document.querySelectorAll('.matching-option')[questionData.correct].classList.add('correct');
            }
            
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function highlightMatchingOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.matching-option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (i === index) {
                    option.classList.add('selected');
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        options[questionData.correct].classList.add('correct');
                    }
                }
            });
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function highlightSelectedOptionsForMultipleResponse() {
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
        }

        function submitAnswer() {
            if (selectedOptions.length === 0) return;
            
            isSubmitted = true;
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].submitted = true;
            
            const questionData = getCurrentQuestionData();
            showFeedbackForMultipleResponse(questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('cancelBtn').classList.remove('show');
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function showFeedbackForMultipleResponse(questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            const allCorrectSelected = questionData.correct.every(c => selectedOptions.includes(c));
            const noIncorrectSelected = selectedOptions.every(s => questionData.correct.includes(s));
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (questionData.correct.includes(i)) {
                    option.classList.add('correct');
                }
                if (selectedOptions.includes(i) && !questionData.correct.includes(i)) {
                    option.classList.add('incorrect');
                }
            });
            
            if (allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Perfect! All correct selected.';
            } else if (allCorrectSelected && !noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Almost! All correct + some incorrect.';
            } else if (!allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Partially correct! Some correct, missed others.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                feedbackText.textContent = 'Incorrect. Missed correct & selected incorrect.';
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                selectedOptions = [];
                isSubmitted = false;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                if (answers[currentSection][currentQuestion]) {
                    answers[currentSection][currentQuestion] = {selected: [], submitted: false};
                }
                
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('cancelBtn').classList.remove('show');
            } else if (isMatchingSection()) {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                document.querySelectorAll('.matching-option').forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                // For med-calc and multiple-choice
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (Array.isArray(questionData?.correct)) {
                                if (answer.submitted && Array.isArray(answer.selected)) {
                                    const allCorrect = questionData.correct.every(c => answer.selected.includes(c));
                                    const noIncorrect = answer.selected.every(s => questionData.correct.includes(s));
                                    if (allCorrect && noIncorrect) correctCount++;
                                }
                            } else if (questionData?.isMatching || questionData?.section === 'matching' || questionData?.section === 'med-calc') {
                                if (answer === questionData.correct) correctCount++;
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
                    'med-calc': Array(sections['med-calc'].length).fill(null),
                    'matching': Array(sections['matching'].length).fill(null),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMultipleResponseQuestion()) {
                    selectedOptions = storedAnswer?.selected || [];
                    isSubmitted = storedAnswer?.submitted || false;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                if (!isMatchingSection()) {
                    selectOption(index, questionData);
                }
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                if (!isMatchingSection()) {
                    selectOption(index, questionData);
                }
            } else if (event.key === 'Enter' && isMultipleResponseQuestion()) {
                if (selectedOptions.length > 0 && !isSubmitted) {
                    submitAnswer();
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled && !isMultipleResponseQuestion()) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>